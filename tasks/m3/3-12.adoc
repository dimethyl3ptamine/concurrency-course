.Что будем делать:
Давайте подведём итог по всем инструментам по работе с общими переменными. Посчитаем, кто и когда быстрее работает.

Для начала определим общие сценарии:

- Критическая секция - внутри может быть какой угодно код
- Обновление общей переменной
- Счётчик

Будем оценивать производительность разных инструментов при разной нагрузке. Некоторые инструменты идут с флажком fair, так что неплохо проверить его влияние на результаты.

В классе CounterBenchmarks вы найдёте уже написанные бенчмарки на все пройденные инструменты.

С чем можно играться:

- Количество читающих потоков
- Количество пишущих потоков
- Интерпретация результатов:)

Один полный прогон занимает 10-20 минут

---

.Какое количество потоков указывать?

Классические сценарии подобных тестов:

- Преобладают читатели - Х читателей, 1 писатель
- Преобладают писатели - 1 читатель, Х писателей
- Равномерное распределение - Х/2 читателей, X/2 писателей

.Нагрузка

Пусть N - количество ядер процессора. Тогда

- N/2 считается слабой нагрузкой
- N - нормальной
- N*2 - повышенной
- N*3 - высокой

Разумеется, это всё примерно. Если у вас на примете есть более интересные сценарии, можете использовать их.

Выбирайте значения, которые больше подходят под предмет исследования.

---

.Визуализация

В методе main можно раскомментировать строки

 .resultFormat(ResultFormatType.JSON)
 .result("benchmark-result.json")

и получить результаты в виде JSON файла. Далее этот файл можно передать в визуализатор, например, в https://jmh.morethan.io

Это необязательно, но кому-то графики проще изучать, чем цифры

---

.Задание:

 1) Опишите свои тестовые условия:
 - версия java
 - количество ядер процессора
 - есть ли у процессора hyper-threading
 - операционная система
 2) Составьте план экспериментов: вспомните всё, что мы проходили в этом модуле. Подумайте, что с чем нужно сравнить и при каких условиях
 3) Проведите замеры
 4) Сгруппируйте результаты и проанализируйте

Хотя это задание исследовательское и наибольшую ценность представляет интерпретация результатов, указывайте, пожалуйста, в результатах конкретные цифры в читаемом виде (можно в виде процентов от базовых значений).

Рекомендую написать вывод в формате практических рекомендаций. В дальнейшем вы можете обращаться к этому тексту и выбирать наиболее подходящий инструмент для своих задач.